# Diff 算法

1. Tree diff:
    - 只对比同一层级的 dom 节点,当节点发生变化,整个节点以及子节点都会发生变化,
    - 这也就意味着 dom 节点发生跨层级移动, react 会删除旧节点,生成新节点,而不会复用
    - 如果类型不同, 就销毁重建.
    - 类型相同, React 保留节点, 仅对比有更新的属性. 处理完当前节点后, 再对子节点进行递归.
2. Component diff:
    - 当组件更新时,组件实例不变, 只更新 props,并调用 生命周期钩子
3. Element diff:
    - 同层级节点比较, 需要 通过元素的唯一 id 来区分,也就是常说的 key
    - 如果没有 key,一旦有插入或删除动作, 会导致该位置之后的列表重新渲染.
    - 这也是为什么渲染 list 的时候,需要使用唯一的 key.

## React Fiber
