## 进程,线程

-   进程: 多个程序
-   线程: 干活的.
-   栈内存 Stack: 提供一个环境,执行代码.
-   堆内存:

 <!--  浏览器是多线程, js是单线程 -->

## 渲染流程

1. `域名解析`: 获取对应的 IP 地址

    - 浏览器自身的 DNS 缓存
    - 操作系统的域名缓存
    - 本地 host 文件. [ip 地址 域名] 只有域名 switchHost 软件
    - 域名服务器
    - 获取端口号

2. `建立TCP链接`: 根据 IP 地址 + 端口号
    - TCP 是一个端到端的可靠的面向链接的协议.
    - 三次握手
3. `发送http请求`
    - 浏览器会向 web 服务器 以 流的形式传输数据, 告诉服务器 要访问的资源
    - 服务器解析请求 的数据, 然后读取对应的内容, 返回给浏览器
    - 关闭 TCP 连接.
4. `服务器响应Http请求, 浏览器拿到html代码`
5. `浏览器解析html代码,并渲染页面`

    - http 响应阶段: http 状态码, 304 缓存, http 报文

    - a. 浏览器开辟一个 栈内存,同时分配一个主线程来执行代码. 然后维护一个任务队列.
        - 解析 html 标签.
        - 解析 CSS. 从右往左/
        - 当遇到 `link script img`等标签, 开启新的线程去加载对应的资源.
        - dom 树.
    - b. 生成 render tree
        - dom 树 + css 树
    - c. 通知 GPU,显卡, 来一点一点绘制.
        - 根据生成的 render tree 来计算位置, 也就是回流.
        - 然后 绘制元素样式, 也就是重绘.
        - 最后 GPU 绘制.

6. 服务器关闭 TCP 链接.

<!--
     - css: css加载
     - script 加载会 阻塞 dom 解析. 因此将它放到文档最底部
         - defer: 异步加载, 加载完等到 dom 解析完毕再执行.
         - async: 异步加载,加载完就执行
         - 比如统计脚本之类的
  -->
