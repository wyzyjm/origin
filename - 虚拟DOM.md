# 真实 DOM

-   真实 DOM:
    -   浏览器解析 html 文件, html(DOM 树) + css(style 规则) = 结合为 render 树 -> 通过重排和重绘 渲染到页面上

## 虚拟 DOM

-   工作原理是: 通过 js 对象模拟 dom 节点, 包含 元素的 type 类型,props 属性,children 字段等.
-   优势:

    -   提高渲染性能: 通过 diff 算法来减少真实 dom 操作,来提高性能.
    -   规避 xss 攻击.
    -   可跨平台使用. 所以在使用 react 的时候, pc 网站一般引入 react + react-dom

## diff 算法

-   实际上 React 维护了两个虚拟 dom, 一个是真实 dom 的副本,一个是具有更新状态的虚拟 DOM.
-   react 采用了深度优先的比较策略, 先对 dom 树进行比较,同一层次节点进行比较, 如果该节点发生变化,则更新该节点及其子节点.
-   组件比对: 只要 class 相同,就认为是同一组件
-   元素比对: key

## key 的作用

-   用来判断元素是新创建得还是被移动的元素, 从而减少不必要的渲染.
-   比如一个列表, 当在后面追加一个的时候, 这个列表的更新只有追加的那一个, 当在前面插入的时候, 如果没有 key, 从插入的节点开始,之后的都会重新渲染,
-   而当有 key 的时候, 就只有插入的那段 dom 更新. 删除某一个, 列表不会重新渲染.
-   因此 key 值必须是唯一的值, 不能是随机字符串和 index 索引, 常用数据的 id 来当做 key 值

## 防止 xss 攻击

-   通过向用户网站中嵌入恶意代码的方式来获取用户信息等.
